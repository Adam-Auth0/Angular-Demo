<div class="container mt-5" *ngIf="!token2">
    <div class="row">
        <div class="border-box">
        <form>
            <p>Select the required company, followed by profile and then click "Get Access Token"</p>
            <div>
            <mat-form-field>
                <mat-label>Company</mat-label>
                <mat-select [(ngModel)]="selectedCompany" name="company" (selectionChange)="companyChange(selectedCompany)">
                    <mat-option *ngFor="let company of companies" [value]="company.name">
                        {{ company.description }}
                    </mat-option>
                </mat-select>
            </mat-form-field>
            </div>
            <div>
            <mat-form-field>
                <mat-label>Profile</mat-label>
                <mat-select [(ngModel)]="selectedProfile" [disabled]="selectedCompany===undefined" name="profile">
                    <mat-option *ngFor="let profile of activeProfiles" [value]="profile.name">
                        {{ profile.description }}
                    </mat-option>
                </mat-select>
            </mat-form-field>
            </div>
        </form>
        </div>
    </div>

    <div class="row">
        <div class="usrinput-box">
            <button mat-stroked-button (click)="initiateGetToken()" color="primary" [disabled]="selectedProfile===undefined || selectedProfile===''">Get Access Token</button>
        </div>
    </div>
</div>

<div class="container mt-5" *ngIf="token2">
    <div class="row">
        <div class="border-box">
            <p> Company: {{ selectedCompany }} </p>
            <p> Profile: {{ selectedProfile }} </p>
        </div>
    </div>
</div>

<div class="container mt-5" *ngIf="token2">
    <div class="row">
        <code class="jwt-box">
            <span class="jwt-header">{{ jwtPart[0] }}</span>
            <span class="jwt-dot">.</span>
            <span class="jwt-payload">{{ jwtPart[1] }}</span>
            <span class="jwt-dot">.</span>
            <span class="jwt-signature">{{ jwtPart[2] }}</span>
        </code>
    </div>

    <div class="row">
        <div class="usrinput-box">
            <mat-slide-toggle [color]="primary" [formControl]="showjsonControl">Show raw decoded token</mat-slide-toggle>
        </div>
    </div>

    <div class="row" *ngIf="showjsonControl.value">
        <code class="jwt-box">
            <pre class="json">{{ token2Json }}</pre>
        </code>
    </div>
</div>
